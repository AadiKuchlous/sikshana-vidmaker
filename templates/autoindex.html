{% extends '__autoindex__/autoindex.html' %}
{% import 'macros.html' as macros %}

{% block meta %}
  {{ super() }}
  {% assets "css_all" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}">
  {% endassets %}
<style>
/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

.modal-content {
  position: relative;
  background-color: #fefefe;
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 25%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  animation-name: animatetop;
  animation-duration: 0.4s
}

/* The Close Button */
.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

.modal-header{
  text-align: center;
}

#OldName{
  font-weight: bold;
}

@keyframes animatetop {
  from {top: -300px; opacity: 0}
  to {top: 0; opacity: 1}
}

</style>

{% endblock %}

{% block header %}
  {% if preview=='true' %}
	<div></div>
  {% else %}
	{{ macros.navbar(page, current_user) }}
	<br><br><br><br>
  {% endif %}
<div id="renameModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">

        <span class="close">&times;</span>
        <div class="modal-header">
          <h2>Change Video Name</h2>
        </div>
        <p>Old Video Name: <div id="OldName">'Name Goes Here'</div></p>
        <form id="renameForm" enctype="multipart/form-data" method="POST" action="{{ url_for('rename') }}">
		<input type="hidden" id="oldname" name="oldname" value="">
                <label for="new_name">New Video Name</label><br>
                <input type="text" id="new_name" name="new_name" value=""><br><br>

                <input type="submit" id="renameSubmit" value="Change Name">
        </form>
  </div>

</div>	

<div id="deleteModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">

        <span class="close">&times;</span>
        <div class="modal-header">
          <h2>Delete Videos</h2>
        </div>
        <p>You wish to delete videos with the name: <div id="name-displayed-to-delete">'Name Goes Here'</div></p>
	<p>This action is permanent. Deleted Items cannot be restored. Do you wish to proceed with this action?</p>
        <form id="renameForm" enctype="multipart/form-data" method="POST" action="{{ url_for('delete') }}">
                <input type="hidden" id="name-to-delete" name="name-to-delete" value="">
                <input type="submit" id="renameSubmit" value="Delete">
        </form>
  </div>

</div>

{% endblock %}

{% block footer %}
  {{ super() }}
<script>
// Get the modal
var renamemodal = document.getElementById("renameModal");
var deletemodal = document.getElementById("deleteModal");

var videoName = document.getElementById("OldName");
var videoName_to_remove = document.getElementById("name-displayed-to-delete");
// Get the button that opens the modal
var btn = document.getElementsByClassName("renameBtn");
var videoname_form = document.getElementById("oldname");
var videoname_form_delete = document.getElementById("name-to-delete");


// Get the <span> element that closes the modal
var renamespan = document.getElementsByClassName("close")[0];
var deletespan = document.getElementsByClassName("close")[1];

// When the user clicks on the button, open the modal
function show_rename_popup(name) {
  renamemodal.style.display = "block";
  videoName.innerText = name;
  videoname_form.value = name;
}

function show_delete_popup(name) {
  deletemodal.style.display = "block";
  videoName_to_remove.innerText = name;
  videoname_form_delete.value = name;
}

// When the user clicks on <span> (x), close the modal

renamespan.onclick = function() {
  renamemodal.style.display = "none";
}

deletespan.onclick = function() {
  deletemodal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == renamemodal) {
    renamemodal.style.display = "none";
    deletemodal.style.display = "none";
  }
}


</script>
{% endblock %}
